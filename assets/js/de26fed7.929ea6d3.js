"use strict";(self.webpackChunkconvenient_service_docs=self.webpackChunkconvenient_service_docs||[]).push([[7850],{3753:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>d,contentTitle:()=>a,default:()=>u,frontMatter:()=>c,metadata:()=>o,toc:()=>i});var n=t(4848),r=t(8453);const c={slug:"/basics/results_are_ducks",sidebar_position:7,title:"Result-ducks"},a=void 0,o={id:"basics/results_are_ducks",title:"Result-ducks",description:"Why Results are Ducks?",source:"@site/docs/basics/results_are_ducks.mdx",sourceDirName:"basics",slug:"/basics/results_are_ducks",permalink:"/basics/results_are_ducks",draft:!1,unlisted:!1,editUrl:"https://github.com/marian13/convenient_service_docs/blob/main/docs/basics/results_are_ducks.mdx",tags:[],version:"current",sidebarPosition:7,frontMatter:{slug:"/basics/results_are_ducks",sidebar_position:7,title:"Result-ducks"},sidebar:"docs",previous:{title:"Success",permalink:"/basics/success"},next:{title:"Steps",permalink:"/basics/steps"}},d={},i=[{value:"Why Results are Ducks?",id:"why-results-are-ducks",level:2}];function l(e){const s={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",em:"em",h2:"h2",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.h2,{id:"why-results-are-ducks",children:"Why Results are Ducks?"}),"\n",(0,n.jsxs)(s.blockquote,{children:["\n",(0,n.jsx)(s.p,{children:"If it looks like a duck, swims like a duck, and quacks like a duck, then it probably is a duck."}),"\n",(0,n.jsx)(s.p,{children:"\u2014 Duck test"}),"\n"]}),"\n",(0,n.jsxs)(s.p,{children:["Results are Ducks in the sense that no matter whether you have ",(0,n.jsx)(s.code,{children:"success"}),", ",(0,n.jsx)(s.code,{children:"failure"}),", or ",(0,n.jsx)(s.code,{children:"error"})," - all of them have the same interface with reasonable defaults."]}),"\n",(0,n.jsx)(s.p,{children:"Here is a comparison table:"}),"\n",(0,n.jsxs)(s.table,{children:[(0,n.jsx)(s.thead,{children:(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.th,{}),(0,n.jsx)(s.th,{children:"data"}),(0,n.jsx)(s.th,{children:"message"}),(0,n.jsx)(s.th,{children:"code"})]})}),(0,n.jsxs)(s.tbody,{children:[(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"success"}),(0,n.jsxs)(s.td,{children:["*data or ",(0,n.jsx)(s.code,{children:"{}"})]}),(0,n.jsxs)(s.td,{children:["*message or ",(0,n.jsx)(s.code,{children:'""'})]}),(0,n.jsxs)(s.td,{children:["*code or ",(0,n.jsx)(s.code,{children:":default_success"})]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"failure"}),(0,n.jsxs)(s.td,{children:["*data or ",(0,n.jsx)(s.code,{children:"{}"})]}),(0,n.jsxs)(s.td,{children:["*message or ",(0,n.jsx)(s.code,{children:'""'})]}),(0,n.jsxs)(s.td,{children:["*code or ",(0,n.jsx)(s.code,{children:":default_failure"})]})]}),(0,n.jsxs)(s.tr,{children:[(0,n.jsx)(s.td,{children:"error"}),(0,n.jsxs)(s.td,{children:["*data or ",(0,n.jsx)(s.code,{children:"{}"})]}),(0,n.jsxs)(s.td,{children:["*message or ",(0,n.jsx)(s.code,{children:'""'})]}),(0,n.jsxs)(s.td,{children:["*code or ",(0,n.jsx)(s.code,{children:":default_error"})]})]})]})]}),"\n",(0,n.jsxs)(s.p,{children:["Where * means ",(0,n.jsx)(s.em,{children:"user-provided"}),"."]}),"\n",(0,n.jsxs)(s.admonition,{type:"info",children:[(0,n.jsx)(s.p,{children:"As a user, you have the ability to pass custom values for everything, e.g: extraordinary code for success."}),(0,n.jsxs)(s.p,{children:["We (as library designers) left such a possibility to avoid the ",(0,n.jsx)(s.a,{href:"https://refactoring.guru/smells/incomplete-library-class",children:"Incomplete Library Class"})," code smell."]}),(0,n.jsx)(s.p,{children:"But to be honest, we don't see any valuable use cases for now."})]}),"\n",(0,n.jsxs)(s.admonition,{type:"note",children:[(0,n.jsxs)(s.p,{children:["Actually, ",(0,n.jsx)(s.a,{href:"/",children:"Convenient Service"})," utilizes ",(0,n.jsx)(s.a,{href:"https://www.justinweiss.com/articles/a-decorator-vs-a-subclass/",children:"look-alike wrappers"})," for data, message, and code."]}),(0,n.jsxs)(s.p,{children:[(0,n.jsx)(s.code,{children:"{}"}),", ",(0,n.jsx)(s.code,{children:'""'})," and ",(0,n.jsx)(s.code,{children:":symbol"})," notations are used to not overcomplicate the table with too low-level details."]})]}),"\n",(0,n.jsxs)(s.p,{children:["As a consequence, you can be confident that any (adequate) status check (like ",(0,n.jsx)(s.code,{children:"success?"}),") is enough to proceed:"]}),"\n",(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ruby",children:"def show\n  # ...\n\n  # Status is logically checked somewhere.\n  result.success?\n\n  # n lines of code later...\n\n  # Won't crash since all `success`, `failure` and `error` respond to `data` and have reasonable defaults.\n  result.data\n\n  # Won't crash since all `success`, `failure` and `error` respond to `message` and have reasonable defaults.\n  result.message\n\n  # Won't crash since all `success`, `failure` and `error` respond to `code` and have reasonable defaults.\n  result.code\n\n  # ...\nend\n"})}),"\n",(0,n.jsxs)(s.admonition,{type:"danger",children:[(0,n.jsx)(s.p,{children:"When you forget to check the result status before accessing any of its attributes - an exception is raised."}),(0,n.jsx)(s.p,{children:"That is intentional in order to motivate a user to think not only about a happy path but about negative cases as well."}),(0,n.jsx)(s.p,{children:"For example:"}),(0,n.jsx)(s.pre,{children:(0,n.jsx)(s.code,{className:"language-ruby",children:"delivery_result = OrderFoodDelivery.result\n\n# Oh, raises `... Result::Errors::StatusIsNotChecked` since (as its name states) status is not checked.\n# How can you eat something if you don't even know whether it is already delivered or not \ud83d\ude42?\nclient.eat(delivery_result.data[:food])\n"})})]})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,n.jsx)(s,{...e,children:(0,n.jsx)(l,{...e})}):l(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>o});var n=t(6540);const r={},c=n.createContext(r);function a(e){const s=n.useContext(c);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function o(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(c.Provider,{value:s},e.children)}}}]);