"use strict";(self.webpackChunkconvenient_service_docs=self.webpackChunkconvenient_service_docs||[]).push([[5374],{7201:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>c});var t=s(4848),r=s(8453);const i={slug:"/guides/debugging/how_to_debug_services_via_callbacks",sidebar_position:1,title:"How to debug services via callbacks?"},a=void 0,d={id:"guides/debugging/how_to_debug_services_via_callbacks",title:"How to debug services via callbacks?",description:"Use after result",source:"@site/docs/guides/debugging/how_to_debug_services_via_callbacks.mdx",sourceDirName:"guides/debugging",slug:"/guides/debugging/how_to_debug_services_via_callbacks",permalink:"/guides/debugging/how_to_debug_services_via_callbacks",draft:!1,unlisted:!1,editUrl:"https://github.com/marian13/convenient_service_docs/blob/main/docs/guides/debugging/how_to_debug_services_via_callbacks.mdx",tags:[],version:"current",sidebarPosition:1,frontMatter:{slug:"/guides/debugging/how_to_debug_services_via_callbacks",sidebar_position:1,title:"How to debug services via callbacks?"},sidebar:"docs",previous:{title:"Debugging",permalink:"/category/debugging"},next:{title:"How to find result parents?",permalink:"/guides/debugging/how_to_find_result_parents"}},l={},c=[{value:"Use <code>after</code> result",id:"use-after-result",level:2},{value:"Use <code>after</code> step",id:"use-after-step",level:2},{value:"Use <code>around</code> result",id:"use-around-result",level:2},{value:"Use <code>after</code> step",id:"use-after-step-1",level:2},{value:"Real-world example",id:"real-world-example",level:2}];function o(e){const n={code:"code",h2:"h2",pre:"pre",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(n.h2,{id:"use-after-result",children:["Use ",(0,t.jsx)(n.code,{children:"after"})," result"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"after :result do |result|\n  binding.pry\nend\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"use-after-step",children:["Use ",(0,t.jsx)(n.code,{children:"after"})," step"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:"##\n# Step is Result-like duck.\n#\nafter :step do |step|\n  byebug\nend\n"})}),"\n",(0,t.jsxs)(n.h2,{id:"use-around-result",children:["Use ",(0,t.jsx)(n.code,{children:"around"})," result"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'after :result do |chain|\n  puts "before"\n\n  result = chain.yield\n\n  p "after"\nend\n'})}),"\n",(0,t.jsxs)(n.h2,{id:"use-after-step-1",children:["Use ",(0,t.jsx)(n.code,{children:"after"})," step"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'##\n# Step is Result-like duck.\n#\nafter :step do |step|\n  binding.break\n\n  step = chain.yield\n\n  print "after"\nend\n'})}),"\n",(0,t.jsx)(n.h2,{id:"real-world-example",children:"Real-world example"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ruby",children:'# frozen_string_literal: true\n\nmodule Services\n  class AssertNpmPackageAvailable\n    include ConvenientService::Standard::Config\n\n    attr_reader :name\n\n    step :validate_name\n\n    step Services::AssertNodeAvailable\n\n    step Services::RunShell, in: {command: -> { "npm list #{name} --depth=0 > /dev/null 2>&1" }}\n\n    # highlight-start\n    after :result do |result|\n      binding.pry\n    end\n\n    after :step do |step|\n      byebug\n    end\n    # highlight-end\n\n    def initialize(name:)\n      @name = name\n    end\n\n    private\n\n    def validate_name\n      return error("Name is `nil`") if name.nil?\n      return error("Name is empty") if name.empty?\n\n      success\n    end\n  end\nend\n'})})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>d});var t=s(6540);const r={},i=t.createContext(r);function a(e){const n=t.useContext(i);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),t.createElement(i.Provider,{value:n},e.children)}}}]);